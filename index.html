<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–ª—è —Ç–µ–±—è, –ê–ª–∏—Å–∞ üíå</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&family=Pacifico&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #1a0a2e, #2d1b4e, #1a0a2e);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Comfortaa', cursive;
            overflow: hidden;
            user-select: none;
        }

        .hearts-bg {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .floating-heart {
            position: absolute;
            bottom: -50px;
            font-size: 20px;
            animation: floatUp linear infinite;
            opacity: 0.6;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg) scale(1); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(-110vh) rotate(720deg) scale(0.5); opacity: 0; }
        }

        .card {
            position: relative;
            z-index: 10;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 100, 150, 0.2);
            border-radius: 30px;
            padding: 50px 40px;
            text-align: center;
            max-width: 520px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), 0 0 80px rgba(255, 50, 100, 0.1);
            animation: cardAppear 1s ease-out;
        }

        @keyframes cardAppear {
            from { transform: scale(0.8) translateY(30px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }

        .envelope {
            font-size: 60px;
            margin-bottom: 10px;
            animation: bounce 2s ease-in-out infinite;
            display: inline-block;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .name {
            font-family: 'Pacifico', cursive;
            font-size: 42px;
            background: linear-gradient(90deg, #ff6b9d, #ff9a9e, #ffd1dc, #ff9a9e, #ff6b9d);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s linear infinite;
            margin-bottom: 8px;
        }

        @keyframes shimmer {
            to { background-position: 200% center; }
        }

        .question {
            color: #e8d5f5;
            font-size: 22px;
            line-height: 1.6;
            margin: 20px 0 35px;
        }

        .question .highlight {
            color: #ff6b9d;
            font-weight: 700;
            font-size: 26px;
            display: block;
            margin-top: 10px;
        }

        .buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
            min-height: 70px;
            position: relative;
        }

        .btn-yes {
            padding: 16px 48px;
            font-size: 20px;
            font-family: 'Comfortaa', cursive;
            font-weight: 700;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            background: linear-gradient(135deg, #ff6b9d, #ff3366);
            color: white;
            box-shadow: 0 8px 25px rgba(255, 51, 102, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-yes:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(255, 51, 102, 0.6);
        }

        .btn-yes::after {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: linear-gradient(transparent, rgba(255,255,255,0.2), transparent);
            transform: rotate(45deg);
            animation: btnShine 3s ease-in-out infinite;
        }

        @keyframes btnShine {
            0%, 100% { transform: rotate(45deg) translateX(-100%); }
            50% { transform: rotate(45deg) translateX(100%); }
        }

        .btn-no {
            padding: 14px 36px;
            font-size: 16px;
            font-family: 'Comfortaa', cursive;
            font-weight: 700;
            border: 2px solid rgba(255, 107, 157, 0.4);
            border-radius: 50px;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.05);
            color: #cba6d6;
            transition: all 0.15s ease;
            position: relative;
            transform-origin: 0 0;
        }

        .counter-text {
            color: #9a7baf;
            font-size: 13px;
            margin-top: 20px;
            min-height: 20px;
            transition: opacity 0.3s;
        }

        /* Success screen */
        .success-screen {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1000;
            background: linear-gradient(135deg, #1a0a2e, #2d1b4e);
            flex-direction: column;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.5s ease;
        }

        .success-screen.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .success-heart {
            font-size: 120px;
            animation: heartPulse 0.8s ease-in-out infinite;
        }

        @keyframes heartPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .success-text {
            font-family: 'Pacifico', cursive;
            font-size: 38px;
            background: linear-gradient(90deg, #ff6b9d, #ff9a9e, #ffd1dc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 20px 0 10px;
        }

        .success-sub {
            color: #e8d5f5;
            font-size: 20px;
            max-width: 400px;
            line-height: 1.6;
        }

        .sparkle-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1001;
        }

        .sparkle {
            position: absolute;
            font-size: 30px;
            animation: sparkleAnim 1.5s ease-out forwards;
        }

        @keyframes sparkleAnim {
            0% { transform: scale(0) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
            100% { transform: scale(0) rotate(360deg) translateY(-100px); opacity: 0; }
        }

        .growing-yes {
            animation: growYes 0.3s ease forwards;
        }

        @keyframes growYes {
            to { transform: scale(1.15); }
        }

        /* Messages that appear on No hover */
        .flee-message {
            position: absolute;
            color: #ff6b9d;
            font-size: 14px;
            font-weight: 700;
            pointer-events: none;
            opacity: 0;
            animation: msgPop 1.5s ease forwards;
            white-space: nowrap;
            z-index: 100;
        }

        @keyframes msgPop {
            0% { opacity: 0; transform: translateY(0) scale(0.5); }
            20% { opacity: 1; transform: translateY(-10px) scale(1); }
            80% { opacity: 1; }
            100% { opacity: 0; transform: translateY(-40px); }
        }

        /* --- Mobile adaptation --- */
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .card {
                padding: 30px 20px;
                border-radius: 20px;
                width: 95%;
            }

            .envelope {
                font-size: 44px;
            }

            .name {
                font-size: 30px;
            }

            .question {
                font-size: 16px;
                margin: 15px 0 25px;
            }

            .question .highlight {
                font-size: 19px;
            }

            .btn-yes {
                padding: 14px 36px;
                font-size: 17px;
            }

            .btn-no {
                padding: 10px 24px;
                font-size: 14px;
            }

            .counter-text {
                font-size: 12px;
            }

            .success-heart {
                font-size: 80px;
            }

            .success-text {
                font-size: 28px;
            }

            .success-sub {
                font-size: 16px;
                max-width: 300px;
                padding: 0 15px;
            }

            .flee-message {
                font-size: 12px;
            }
        }

        @media (max-width: 360px) {
            .name {
                font-size: 26px;
            }

            .question {
                font-size: 14px;
            }

            .question .highlight {
                font-size: 17px;
            }

            .btn-yes {
                padding: 12px 28px;
                font-size: 15px;
            }

            .success-text {
                font-size: 24px;
            }

            .success-sub {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>

<div class="hearts-bg" id="heartsBg"></div>

<div class="card" id="mainCard">
    <div class="envelope">üíå</div>
    <div class="name">–ê–ª–∏—Å–∞</div>
    <p class="question">
        –£ –º–µ–Ω—è –∫ —Ç–µ–±–µ –æ–¥–∏–Ω –≤–∞–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å...
        <span class="highlight">–ë—É–¥–µ—à—å –ª–∏ —Ç—ã –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? üíï</span>
    </p>
    <div class="buttons" id="buttonsArea">
        <button class="btn-yes" id="btnYes" onclick="sayYes()">–î–∞! üíñ</button>
        <button class="btn-no" id="btnNo">–ù–µ—Ç</button>
    </div>
    <div class="counter-text" id="counterText"></div>
</div>

<div class="success-screen" id="successScreen">
    <div class="sparkle-container" id="sparkleContainer"></div>
    <div class="success-heart">üíñ</div>
    <div class="success-text">–£—Ä–∞!</div>
    <p class="success-sub">–¢—ã —Å–¥–µ–ª–∞–ª–∞ –º–µ–Ω—è —Å–∞–º—ã–º —Å—á–∞—Å—Ç–ª–∏–≤—ã–º —á–µ–ª–æ–≤–µ–∫–æ–º –Ω–∞ —Å–≤–µ—Ç–µ, –ª–∏—Å—è! ü•∞</p>
</div>

<script>
    // --- Floating hearts background ---
    const heartsBg = document.getElementById('heartsBg');
    const heartEmojis = ['üíï', 'üíñ', 'üíó', 'üíì', 'üíò', 'üíù', '‚ù§Ô∏è', 'ü©∑', '‚ú®', 'üå∏'];

    function createFloatingHeart() {
        const heart = document.createElement('div');
        heart.classList.add('floating-heart');
        heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
        heart.style.left = Math.random() * 100 + '%';
        heart.style.fontSize = (14 + Math.random() * 20) + 'px';
        heart.style.animationDuration = (6 + Math.random() * 8) + 's';
        heart.style.animationDelay = Math.random() * 2 + 's';
        heartsBg.appendChild(heart);
        setTimeout(() => heart.remove(), 16000);
    }

    setInterval(createFloatingHeart, 400);
    for (let i = 0; i < 15; i++) setTimeout(createFloatingHeart, i * 200);

    // --- No button logic ---
    const btnNo = document.getElementById('btnNo');
    const btnYes = document.getElementById('btnYes');
    const buttonsArea = document.getElementById('buttonsArea');
    const counterText = document.getElementById('counterText');

    let attempts = 3;
    const fleeMessages = [
        '–ù–µ-–Ω–µ-–Ω–µ! üòè',
        '–î–∞–∂–µ –Ω–µ –Ω–∞–¥–µ–π—Å—è!',
        '–ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑ üòú',
        '–¢—É—Ç –Ω–µ–ª—å–∑—è –Ω–∞–∂–∞—Ç—å! üíÖ',
        '–Ø —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–∞—è! üèÉ‚Äç‚ôÄÔ∏è',
        '–ù–∞–∂–º–∏ –ª—É—á—à–µ "–î–∞"! üíñ',
        '–≠—Ç–∞ –∫–Ω–æ–ø–∫–∞ —Å–ª–æ–º–∞–Ω–∞ ü§∑',
        '–£–ø—Å, –ø—Ä–æ–º–∞—Ö! üòÑ',
        '–ê–ª–∏—Å–∞, –Ω—É –¥–∞–≤–∞–π! ü•∫',
        '–°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ! üíò',
        '–ö–Ω–æ–ø–∫–∞ —É–±–µ–∂–∞–ª–∞! üèÉ',
        '–ë–ª–∏–∂–µ... –±–ª–∏–∂–µ... –ù–ï–¢ üòÇ',
        '–¢—ã –ø–æ—á—Ç–∏ –ø–æ–π–º–∞–ª–∞! (–Ω–µ—Ç) ü§≠',
        '–≠—Ç–∞ –∫–Ω–æ–ø–∫–∞ –Ω–∞ –¥–∏–µ—Ç–µ ü§∏',
        'Ctrl+Z –Ω–µ –ø–æ–º–æ–∂–µ—Ç! ‚å®Ô∏è',
    ];

    function getRandomPosition() {
        const yesRect = btnYes.getBoundingClientRect();

        const vv = window.visualViewport;
        const vw = vv ? vv.width : document.documentElement.clientWidth;
        const vh = vv ? vv.height : document.documentElement.clientHeight;

        // offsetWidth/Height give unscaled size; multiply by next scale
        const nextScale = Math.max(0.4, 1 - (attempts + 1) * 0.06);
        const btnW = btnNo.offsetWidth * nextScale;
        const btnH = btnNo.offsetHeight * nextScale;

        const padding = 10;
        const safeMaxX = Math.max(padding, vw - btnW - padding);
        const safeMaxY = Math.max(padding, vh - btnH - padding);

        let x, y, tries = 0;

        do {
            x = padding + Math.random() * (safeMaxX - padding);
            y = padding + Math.random() * (safeMaxY - padding);
            tries++;
        } while (
            tries < 50 &&
            x < yesRect.right + 30 && x + btnW > yesRect.left - 30 &&
            y < yesRect.bottom + 30 && y + btnH > yesRect.top - 30
        );

        x = Math.max(padding, Math.min(x, safeMaxX));
        y = Math.max(padding, Math.min(y, safeMaxY));

        return { x, y };
    }

    function showFleeMessage(x, y) {
        const msg = document.createElement('div');
        msg.classList.add('flee-message');
        msg.textContent = fleeMessages[attempts % fleeMessages.length];
        msg.style.left = x + 'px';
        msg.style.top = y + 'px';
        document.body.appendChild(msg);
        setTimeout(() => msg.remove(), 1500);
    }

    function fleeButton(e) {
        attempts++;
        const rect = btnNo.getBoundingClientRect();
        showFleeMessage(rect.left, rect.top - 10);

        const pos = getRandomPosition();

        // Switch to fixed positioning for free movement
        btnNo.style.position = 'fixed';
        btnNo.style.left = pos.x + 'px';
        btnNo.style.top = pos.y + 'px';
        btnNo.style.zIndex = '999';

        // Shrink "No" and grow "Yes" with each attempt
        const noScale = Math.max(0.4, 1 - attempts * 0.06);
        btnNo.style.transform = `scale(${noScale})`;

        const yesGrow = 1 + attempts * 0.05;
        btnYes.style.transform = `scale(${Math.min(yesGrow, 1.5)})`;
        btnYes.style.boxShadow = `0 ${8 + attempts * 2}px ${25 + attempts * 4}px rgba(255, 51, 102, ${0.4 + attempts * 0.03})`;

        // Change No button text after several attempts
        if (attempts === 3) btnNo.textContent = '–ù–µ–∞';
        if (attempts === 5) btnNo.textContent = 'üèÉ';
        if (attempts === 7) btnNo.textContent = 'üëª';
        if (attempts === 10) btnNo.textContent = '...';
        if (attempts >= 12) {
            btnNo.style.opacity = Math.max(0.15, 1 - attempts * 0.07);
        }

        // Counter text
        const texts = [
            '', '', '',
            '–ö–∞–∂–µ—Ç—Å—è, –∫–Ω–æ–ø–∫–∞ –Ω–µ —Ö–æ—á–µ—Ç –Ω–∞–∂–∏–º–∞—Ç—å—Å—è... ü§î',
            '–ú–æ–∂–µ—Ç, —ç—Ç–æ –∑–Ω–∞–∫? üòè',
            '–ö–Ω–æ–ø–∫–∞ "–ù–µ—Ç" –æ–±—ä—è–≤–∏–ª–∞ –∑–∞–±–∞—Å—Ç–æ–≤–∫—É!',
            '–û–Ω–∞ —Ä–µ–∞–ª—å–Ω–æ —É–±–µ–≥–∞–µ—Ç –æ—Ç —Ç–µ–±—è üòÇ',
            '–£–ø–æ—Ä—Å—Ç–≤–æ ‚Äî —ç—Ç–æ —Ö–æ—Ä–æ—à–æ, –Ω–æ... üíñ',
            '–í—Å–µ–ª–µ–Ω–Ω–∞—è –≥–æ–≤–æ—Ä–∏—Ç "–î–∞"! ‚ú®',
            '–õ–∞–¥–Ω–æ, —è –≤–æ—Å—Ö–∏—â–∞—é—Å—å —Ç–≤–æ–∏–º —É–ø–æ—Ä—Å—Ç–≤–æ–º üòÑ',
            '–ö–Ω–æ–ø–∫–∞ "–ù–µ—Ç" –ø–æ–∫–∏–Ω—É–ª–∞ —á–∞—Ç üëã',
        ];
        counterText.textContent = texts[Math.min(attempts, texts.length - 1)] || texts[texts.length - 1];
    }

    btnNo.addEventListener('mouseenter', fleeButton);
    btnNo.addEventListener('touchstart', (e) => { e.preventDefault(); fleeButton(e); });
    btnNo.addEventListener('click', fleeButton);

    // --- Yes button ---
    function sayYes() {
        // Explosion of sparkles
        const container = document.getElementById('sparkleContainer');
        const emojis = ['üíñ', 'üíï', '‚ú®', 'üå∏', 'üíó', 'üíò', 'üéâ', 'ü•∞', '‚ù§Ô∏è', 'üíù'];

        for (let i = 0; i < 60; i++) {
            setTimeout(() => {
                const sparkle = document.createElement('div');
                sparkle.classList.add('sparkle');
                sparkle.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.fontSize = (20 + Math.random() * 40) + 'px';
                sparkle.style.animationDuration = (1 + Math.random() * 2) + 's';
                container.appendChild(sparkle);
                setTimeout(() => sparkle.remove(), 3000);
            }, i * 50);
        }

        document.getElementById('successScreen').classList.add('active');
    }
</script>
</body>
</html>
